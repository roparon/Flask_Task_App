{% extends "base.html" %}
{% block content %}
<h1 class="text-primary">Tasks</h1>
<form action="" method="post">
    {{ task_form.hidden_tag() }}
    {{ task_form.title.label(class="form-label") }}
    {{ task_form.title(class="form-control w-50") }}
    {{ task_form.description.label(class="form-label") }}
    {{ task_form.description(class="form-control w-50") }}
    {{ task_form.completed.label(class="form-check-label") }}
    {{ task_form.completed(class="form-check-input") }}
    {{ task_form.submit(class="btn btn-primary mt-3") }}
</form>

<h2 class="text-secondary mt-4">Task List</h2>
<div class="list-group">
    {% for task in tasks %}
    <form action="{{ url_for('toggle_task', task_id=task.task_id) }}" method="post" style="display: inline;">
        <input type="checkbox"
            {% if task.completed %} checked {% endif %}
            onchange="this.form.submit()"
            id="task-{{ task.task_id }}"
            title="Mark task as completed">
    </form>
    <label for="task-{{ task.task_id }}" class="list-group-item">
        {{ loop.index }}. {{ task.title }}
    </label>
    <span>{{ task.description }}</span>
    <form action="{{ url_for('delete_task', task_id=task.task_id) }}" method="post" onsubmit="return confirm('Are you sure you want to delete this task?');" style="display: inline;">
        <button type="submit" class="btn btn-danger btn-sm">Delete</button>
    </form>
    {% endfor %}
</div>
{% endblock %}